Харківський національний університет радіоелектроніки
Факультет комп’ютерних наук
Катедра програмної інженерії

ЗВІТ
з лабораторної роботи № 2
з дисципліни «Скриптові мови програмування»
на тему: «Принципи роботи PHP. Основні синтаксичні конструкції. Дані, їх типи та робота з ними»

Виконав
ст. гр. ПЗПІ-23-4
Рибалко Ігор

Перевірив
ст. викладач катедри ПІ
Сокорчук Ігор Петрович

Харків 2025

1 ІСТОРІЯ ЗМІН
№     Дата     Версія звіту   Опис змін та виправлень
1   14.05.25       0.1        Створено розділи «Історія змін», «Завдання», «Опис виконаної роботи», «Висновки»
2   17.05.25       0.2        Редагування розділів «Опис виконаної роботи», «Висновки» та створення розділів «Додаток А» та «Додаток Б»


2 ЗАВДАННЯ
Під час лабораторної роботи потрібно створити консольний застосунок «Продовольчий магазин "Весна"».
Програма після запуску повинна вивести на термінал перелік можливих дій:
1 Вибрати товари
2 Отримати підсумковий рахунок
3 Налаштувати свій профіль
0 Вийти з програми
Введіть команду: _

Далі програма очікує введення значення з клавіатури. Якщо користувач вводить число, якого немає в списку можливих команд, необхідно вивести повідомлення про помилку і запропонувати користувачу ввести інше число:
Введіть команду: 4
ПОМИЛКА! Введіть правильну команду
1 Вибрати товари
2 Отримати підсумковий рахунок
3 Налаштувати свій профіль
0 Вийти з програми
Введіть команду: _

Щоб розпочати купувати товари, необхідно ввести число «1», після чого користувач повинен потрапити в режим закупівлі товарів.
На екрані має з’явитися перелік продуктів, де кожен рядок складається з номера, назви товару і його вартості, наприклад:
Введіть команду: 1
№  НАЗВА                 ЦІНА
1  Молоко пастеризоване  12
2  Хліб чорний           9
3  Сир білий             21
4  Сметана 20%           25
5  Кефір 1%              19
6  Вода газована         18
7  Печиво "Весна"        14
   -----------
0  ПОВЕРНУТИСЯ
Виберіть товар: _

Щоб купити товар, необхідно ввести його номер.
Після успішної перевірки на існування номера товару в списку, програма має попросити ввести кількість товару:
Виберіть товар: 2
Вибрано: Хліб чорний
Введіть кількість, штук: 1
У КОШИКУ:
НАЗВА        КІЛЬКІСТЬ
Хліб чорний  1

Якщо номер товару і його кількість (менше 100 шт.) були вказані коректно, то товар додається в кошик.
Якщо вказано кількість «0», то товар видаляється з кошика:
Виберіть товар: 2
Вибрано: Хліб чорний
Введіть кількість, штук: 0
ВИДАЛЯЮ З КОШИКА
КОШИК ПОРОЖНІЙ

Далі знову відображається перелік товарів і пропонується купити наступний товар.
Якщо номер товару вказано неправильно, виводиться сповіщення про помилку, нову виводиться перелік товарів:
№  НАЗВА                 ЦІНА
1  Молоко пастеризоване  12
2  Хліб чорний           9
3  Сир білий             21
4  Сметана 20%           25
5  Кефір 1%              19
6  Вода газована         18
7  Печиво "Весна"        14
   -----------
0  ПОВЕРНУТИСЯ
Виберіть товар: 8
ПОМИЛКА! ВКАЗАНО НЕПРАВИЛЬНИЙ НОМЕР ТОВАРУ

Щоб завершити купувати товари і перейти до попереднього меню, необхідно ввести з клавіатури цифру «0».
Щоб отримати підсумковий рахунок, потрібно ввести число «2».
Рахунок має містити таку інформацію: №, назва, ціна товару, кількість товару, вартість товару. 
У кінці чека має бути: РАЗОМ ДО CПЛАТИ: сума_за_всі_товари
Наприклад:
Введіть команду: 2
№  НАЗВА                 ЦІНА  КІЛЬКІСТЬ  ВАРТІСТЬ
1  Печиво "Весна"        14    1          14
2  Молоко пастеризоване  12    2          24
3  Сметана 20%           25    1          25
4  Хліб чорний           9     1          9
РАЗОМ ДО CПЛАТИ: 72

Щоб встановити свій профіль потрібно, ввести число «3», після чого програма попросить ввести ваше ім'я та ваш вік:
Ваше імʼя: _
Ваш вік: _

Імʼя користувача не може бути порожнім і повинно містити хоча б одну літеру.
Користувач не може бути молодшим 7-ми або старшим 150-ти років
Щоб завершити роботу та вийти з програми, потрібно ввести число «0».
У програмі потрібно перевіряти інформацію, яку вводить користувач, а саме:
* обраний пункт меню існує
* обраний товар існує;
* введена кількість товару більша нуля;
* імʼя користувача містить хоча б одну літеру;
* вік користувача становить від 7-ми до 150-ти років.

3 ОПИС ВИКОНАНОЇ РОБОТИ
Для початку зазначимо, що програма має виконуватися на мові PHP, тому додаємо службовий рядок #!/usr/bin/php -f для її запуску та відкриваємо PHP-блок за допомогою <?php ?>. Далі, всередині цього блоку оголошуємо три основні функції: nameMagazine(), showMainMenu(), showProducts() - у яких розписуємо логіку виведення заголовку, переліку доступних користувачу дій та асортиментів продуктів консольного застосунку магазину (див. фрагмент коду Б.1).

Наступним чином оголосимо змінні для подальшого функціонування нашого застосунку, а саме: $products - масив з доступними продуктами магазину та їхніми цінами; $cart - масив для обраних продуктів; $userName та $userAge для виконання заповнення профілю відповідно до завдання лабораторної роботи (див. фрагмент коду Б.2).

Далі, розпочинаємо функціонування програми та викликаємо функцію nameMagazine() та цикл while, де виводимо доступні дії користувача (showMainMenu()) та фіксуємо введені символи з клавіатури $input = trim(fgets(STDIN)для подальшого виконання скрипта.

Тепер використаємо конструкцію switch - у якій будуть розписані сценарії вибір продукту та його кількості, формування підсумкового рахунку на основі вашого кошику та налаштуванні профілю користувача. Тому розпочнемо з вибору продукту: користувачеві виводиться перелік усіх доступних товарів із номерами та цінами. Після цього програма очікує, що користувач введе номер обраного товару. Якщо введено "0", відбувається вихід із підменю вибору. У разі некоректного номера (наприклад, товару з таким номером не існує), виводиться повідомлення про помилку, і користувача просять повторити нове введення команди. Після правильного вибору користувач вводить кількість одиниць товару - якщо значення некоректне або занадто велике >= 100, також з’являється повідомлення про помилку. Якщо ж кількість коректна, товар додається до кошика, а при введенні нуля - видаляється; далі виводиться актуальний вміст кошика (див. фрагмент коду Б.3). 

Наступним чином перейдімо до реалізації логіки формування підсумкового рахунку: після вибору відповідного пункту меню програма виводить таблицю з інформацією про всі товари в кошику. Для кожного з них вказуються порядковий номер, назва, ціна за одиницю, кількість та вартість. Назви товарів вирівнюються пробілами для зручного відображення в колонках. Загальна сума обчислюється шляхом множення ціни кожного товару на його кількість і додавання результатів. Далі виводиться підсумкова сума до сплати (див. фрагмент коду Б.4).

І останнє - реалізація налаштування профілю користувача: після вибору цього пункту програма по черзі запитує ім’я та вік користувача. Для імені застосовується регулярний вираз, який перевіряє, чи містить воно лише літери (українські чи інші), пробіли, апостроф або дефіс - у разі порушення вимог з’являється повідомлення про помилку. Після успішного введення імені програма переходить до запиту віку, який повинен бути у межах від 7 до 150 років включно - інакше також з’являється відповідне попередження. Якщо обидва значення введені коректно, вони зберігаються у змінні $userName та $userAge, і на екран виводиться ці дані разом. Також наостанок написано команди виходу (0) та реалізація логіки, якщо не було обрано з перелічених в меню дій користувача команди - (default), і завершується закриттям блоку PHP ?> (див. фрагмент коду Б.5).

4 ВИСНОВКИ
У результаті виконання лабораторної роботи було створено консольний застосунок «Продовольчий магазин "Весна"» на мові PHP. Також було покращено знання з цієї скриптової мови програмування та відпрацьовано на практиці.

ДОДАТОК А
Відеозапис
Відеозапис презентації результатів лабораторної роботи: https://www.youtube.com/watch?v=oZWKueS2IGw 
Хронологічний опис відеозапису:
00:00 - Оголошення службового рядка та базових функцій інтерфейсу консольного магазину
00:44 - Оголошення основних змінних для збереження даних товарів, кошика та профілю користувача
01:55 - Реалізація вибору товарів та керування кошиком користувача
05:13 - Формування підсумкового рахунку
06:09 - Налаштування профілю користувача та завершення програми
07:15 - Демонстрація функціонування програми

ДОДАТОК Б
Програмний код
GitHub репозиторій: https://github.com/NureRybalkoIhor/smp-pzpi-23-4-rybalko-ihor/blob/main/Lab2/smp-pzpi-23-4-rybalko-ihor-lab2/smp-pzpi-23-4-rybalko-ihor-lab2-code 
Б.1 Оголошення службового рядка та базових функцій інтерфейсу консольного магазину
  1 #!/usr/bin/php -f
  2
  3 <?php
  4
  5 function nameMagazine() {
  6     echo "################################\n";
  7     echo "# ПРОДОВОЛЬЧИЙ МАГАЗИН \"ВЕСНА\" #\n";
  8     echo "################################\n";
  9 }
 10
 11 function showMainMenu() {
 12     echo "1 Вибрати товари\n";
 13     echo "2 Отримати підсумковий рахунок\n";
 14     echo "3 Налаштувати свій профіль\n";
 15     echo "0 Вийти з програми\n";
 16     echo "Введіть команду: ";
 17 }
 18
 19 function showProducts() {
 20     echo "№  НАЗВА                 ЦІНА\n";
 21     echo "1  Молоко пастеризоване  12\n";
 22     echo "2  Хліб чорний           9\n";
 23     echo "3  Сир білий             21\n";
 24     echo "4  Сметана 20%           25\n";
 25     echo "5  Кефір 1%              19\n";
 26     echo "6  Вода газована         18\n";
 27     echo "7  Печиво \"Весна\"        14\n";
 28     echo "   -----------\n";
 29     echo "0  ПОВЕРНУТИСЯ\n";
 30 }
 31
Б.2 Оголошення основних змінних для збереження даних товарів, кошика та профілю користувача
 32 $products = [
 33     1 => ['name' => 'Молоко пастеризоване', 'price' => 12],
 34     2 => ['name' => 'Хліб чорний', 'price' => 9],
 35     3 => ['name' => 'Сир білий', 'price' => 21],
 36     4 => ['name' => 'Сметана 20%', 'price' => 25],
 37     5 => ['name' => 'Кефір 1%', 'price' => 19],
 38     6 => ['name' => 'Вода газована', 'price' => 18],
 39     7 => ['name' => 'Печиво "Весна"', 'price' => 14],
 40 ];
 41
 42 $cart = [];
 43 $userName = "";
 44 $userAge = 0;
 45
 46 nameMagazine();
 47
 48 while (true) {
 49     showMainMenu();
 50     $input = trim(fgets(STDIN));
 51
Б.3 Реалізація вибору товарів та керування кошиком користувача
 52     switch ($input) {
 53         case '1':
 54             while (true) {
 55                 showProducts();
 56                 echo "Виберіть товар: ";
 57                 $choice = trim(fgets(STDIN));
 58
 59                 if ($choice === '0') {
 60                     break;
 61                 }
 62
 63                 if (!array_key_exists($choice, $products)) {
 64                     echo "ПОМИЛКА! Вказано неправильний номер товару\n";
 65                     continue;
 66                 }
 67
 68                 $product = $products[$choice];
 69                 echo "Вибрано: {$product['name']}\n";
 70                 echo "Введіть кількість, штук: ";
 71
 72                 $inputQty = trim(fgets(STDIN));
 73
 74                 if (!ctype_digit($inputQty)) {
 75                     echo "ПОМИЛКА! Введіть ціле число від 0 до 99\n\n";
 76                     continue;
 77                 }
 78
 79                 $amount = intval($inputQty);
 80
 81                 if ($amount >= 100) {
 82                     echo "ПОМИЛКА! Кількість має бути від 0 до 99\n\n";
 83                     continue;
 84                 }
 85
 86                 if ($amount === 0) {
 87                     echo "ВИДАЛЯЮ ТОВАР З КОШИКА\n";
 88                     unset($cart[$choice]);
 89                 } else {
 90                     $cart[$choice] = $amount;
 91                 }
 92
 93                 if (empty($cart)) {
 94                     echo "КОШИК ПОРОЖНІЙ\n\n";
 95                 } else {
 96                     echo "У КОШИКУ:\n";
 97                     echo "НАЗВА                 КІЛЬКІСТЬ\n";
 98                     foreach ($cart as $id => $qty) {
 99                         $name = $products[$id]['name'];
100                         $spaces = 22 - mb_strlen($name, 'UTF-8');
101                         echo $name . str_repeat(' ', $spaces) . "$qty\n";
102                     }
103                     echo "\n";
104                 }
105             }
106             break;
107
Б.4 Формування підсумкового рахунку
108         case '2':
109             echo "№  НАЗВА                 ЦІНА  КІЛЬКІСТЬ  ВАРТІСТЬ\n";
110             $total = 0;
111             $i = 1;
112
113             foreach ($cart as $id => $qty) {
114                 $name = $products[$id]['name'];
115                 $price = $products[$id]['price'];
116                 $value = $price * $qty;
117                 $total += $value;
118
119                 $nameLength = mb_strlen($name, 'UTF-8');
120                 $spaces = 21 - $nameLength;
121                 $paddedName = $name . str_repeat(' ', $spaces >= 0 ? $spaces : 0);
122
123                 printf("%-2d %s %-5d %-10d %-11d\n", $i++, $paddedName, $price, $qty, $value);
124             }
125             echo "РАЗОМ ДО CПЛАТИ: $total\n\n";
126             break;
127
Б.5 Налаштування профілю користувача та завершення програми
128         case '3':
129             while (true) {
130                 echo "Ваше ім'я: ";
131                 $name = trim(fgets(STDIN));
132                 if (!preg_match("/^[\p{L}\s'-]+$/u", $name)) {
133                     echo "ПОМИЛКА! Ім'я може містити лише літери, апостроф «'», дефіс «-», пробіл\n\n";
134                     continue;
135                 }
136                 $userName = $name;
137                 break;
138             }
139
140             while (true) {
141                 echo "Ваш вік: ";
142                 $age = intval(trim(fgets(STDIN)));
143                 if ($age < 7 || $age > 150) {
144                     echo "ПОМИЛКА! Користувач повинен мати вік від 7 та до 150 років\n\n";
145                     continue;
146                 }
147                 $userAge = $age;
148                 break;
149             }
150
151             echo "\n";
152             echo "Ваше ім’я: $userName\n";
153             echo "Ваш вік: $userAge\n\n";
154             break;
155
156         case '0':
157             exit;
158
159         default:
160             echo "ПОМИЛКА! Введіть правильну команду\n";
161             break;
162     }
163 }
164 ?>
